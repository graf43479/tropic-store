@model IEnumerable<string>

@{
    ViewBag.Title = "Галерея изображений";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<style>
    .lb-image {
        padding: 0 !important;
    }
    
    .galery-filename-form {
        background: none;
        border: none;
        padding: 0;
    }
    
    .galery-file-name > span{
        visibility: hidden
    }
    
    form#upload-many-image {
        border-top-width: 0px !important; 
        border-bottom-width: 0px !important;
    }
    
    div#blockFile {
        border: none;
    }
    
    
</style>

<script src="@Url.Content("~/Scripts/js/lightbox-2.6.min.js")" type="text/javascript"></script>
@*<script src="@Url.Content("~/Scripts/js/jquery.zclip.min.js")" type="text/javascript"></script>*@
<link href="@Url.Content("~/Content/LightBox/lightbox.css")" rel="stylesheet" type="text/css" />



<h2>Галерея изображений</h2>

<div class="col-lg-12 col-md-12">
    @{
        Html.RenderPartial("GaleryPartial", @Model);
    }


</div>

@*
<div class="col-lg-12 col-md-12" style="padding-bottom: 20px">
    <h2>Добавить изображение</h2>
    @{using (Html.BeginForm("UploadInGalery", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
      {
          //@Html.Hidden("ProductID", Model.ProductID)
          <div class="col-lg-10 col-md-10" style=""><input type="file" name="imagefile" class="form-control"/></div>
          @:   
          <input type="submit" value="Загрузить" class="btn btn-md btn-info col-lg-2 col-md-2"/>
      }
    }
</div>
*@

<div class="col-lg-12 col-md-12" style="padding-bottom: 20px">
    <h2>Добавить изображения</h2>
    @*@{using (Html.BeginForm("UploadManyInGalery", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
      {
          //@Html.Hidden("ProductID", Model.ProductID)
          <div class="col-lg-10 col-md-10" style=""><input type="file" name="imagefiles" class="form-control" id="file1"/></div>
          <div class="col-lg-10 col-md-10" style=""><input type="file" name="imagefiles" class="form-control" id="file2"/></div>
          <div class="col-lg-10 col-md-10" style=""><input type="file" name="imagefiles" class="form-control" id="file3"/></div>
           
          @:   
          <input type="submit" value="Загрузить" class="btn btn-md btn-info col-lg-2 col-md-2"/>
      }
    }*@
    @*<div id="blockFile">
    @{using (Html.BeginForm("UploadManyInGalery", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
      {
          int i = 0;
          for (i = 0; i < 10; i++)
          {
              string id = "file" + i.ToString();
              <div class="col-lg-10 col-md-10" style=""><input type="file" name="imagefiles" class="form-control" id="@id"/></div>
          }
           
          @:   
          <input type="submit" value="Загрузить" class="btn btn-md btn-info col-lg-2 col-md-2"/>
      }
    }
    </div>*@
    
    <div id="blockFile">
        @{using (Html.BeginForm("UploadManyInGalery", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", @id="upload-many-image" }))
          {
              <div class="col-lg-6 col-md-6 galery-file-input" style="padding: 0; border: none;">
                  <input class="file form-contr1ol col-lg-11 col-md-11" type="file" name="imagefiles"/>
                  <a href="javascript://" onclick="addItem (this)" id="add" class="btn btn-info ">+</a>
              
              </div>
           
         
              <div class="col-lg-4 col-md-4" style="padding: 0; border: none;">
                  <input type="submit" value="Загрузить" class="btn btn-md btn-info"/>
              </div>
          }
        }
        
        
     
        @*
        @using (@Ajax.BeginForm("UploadManyInGalery", "Admin", new AjaxOptions
            {
                UpdateTargetId = "newsDetails",
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "POST",
                OnBegin = "gifLoaderBefore",
                OnSuccess = "gifLoaderAfter",
                OnFailure = "gifLoaderAfter",
                OnComplete = "gifLoaderAfter",
            }, new {enctype = "multipart/form-data", @id = "upload-many-image"}))
        {
            <div class="col-lg-6 col-md-6 galery-file-input" style="padding: 0; border: none;">
                <input class="file form-contr1ol col-lg-11 col-md-11" type="file" name="imagefiles"/>
                <a href="javascript://" onclick=" addItem(this) " id="add" class="btn btn-info ">+</a>              
            </div>


            <div class="col-lg-4 col-md-4" style="padding: 0; border: none;">
                <input type="submit" value="Загрузить" class="btn btn-md btn-info"/>
            </div>
        }*@
    </div>
    
    
    
    
        @*<div id="">
        @{using (Html.BeginForm("UploadImageFromInet", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", @id="upload-many-image" }))
      {
          <div class="col-lg-6 col-md-6" style="padding: 0; border: none;">
              <input class="file form-contr1ol col-lg-11 col-md-11" type="text" name="imagelink"/>
              
             </div>
           
         
          <div class="col-lg-4 col-md-4" style="padding: 0; border: none;">
              <input type="submit" value="Загрузить" class="btn btn-md btn-info"/>
              </div>
      }
        }
        </div>*@
</div>



<script>
    function addItem() {
    maxItem = 10;
        index = $("#blockFile .file").length;
    /*
     *Если index превышает допустимое количество элементов то скрываем кнопку *добавления элемента иначе добавляем элемент
     */
    if (maxItem != 0 && index >= maxItem) {
        $('#add').css({
            'display': 'none'
        })
    } else {
        $('#blockFile .galery-file-input').append('\
<input class="file form-cont1rol col-lg-11 col-md-11" type="file" name="imagefiles"/>\
<a href="javascript:\/\/" onclick="deleteItem(this)" class="btn btn-md btn-danger">х</a>\
</div>\
');
    }
}
    
    function deleteItem(element) {
    // Удаляем элемент
        //$(element).parent().remove();
        $(element).prev().remove();
        $(element).remove();
    // Если кнопка добавления элемента скрыта, то показываем ее.
    if ($('#adder:hidden')) {
        $('#add').css({
            'display': 'inline-block'
        })
    }
}
</script>